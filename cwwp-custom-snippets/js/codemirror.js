window.CodeMirror=(function(){function x(aU,aQ){var cd={},bt=x.defaults;for(var aH in bt){if(bt.hasOwnProperty(aH)){cd[aH]=(aQ&&aQ.hasOwnProperty(aH)?aQ:bt)[aH]}}var bw=ad("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");bw.setAttribute("wrap","off");bw.setAttribute("autocorrect","off");bw.setAttribute("autocapitalize","off");var b9=ad("div",[bw],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");var cB=ad("div",null,"CodeMirror-scrollbar-inner");var aT=ad("div",[cB],"CodeMirror-scrollbar");var ay=ad("div"),bq=ad("div",null,null,"position: relative; z-index: -1");var bm=ad("pre","\u00a0","CodeMirror-cursor"),bf=ad("pre","\u00a0","CodeMirror-cursor","visibility: hidden");var aD=ad("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;");var bG=ad("div",[aD,bm,bf,bq,ay],null,"position: relative; z-index: 0");var a6=ad("div",null,"CodeMirror-gutter-text"),aO=ad("div",[a6],"CodeMirror-gutter");var cv=ad("div",[aO,ad("div",[bG],"CodeMirror-lines")],null,"position: relative");var cl=ad("div",[cv],null,"position: relative");var bu=ad("div",[cl],"CodeMirror-scroll");bu.setAttribute("tabIndex","-1");var aL=ad("div",[b9,aT,bu],"CodeMirror"+(cd.lineWrapping?" CodeMirror-wrap":""));if(aU.appendChild){aU.appendChild(aL)}else{aU(aL)}cS();cL();if(w){bw.style.width="0px"}if(!h){bu.draggable=true}bG.style.outline="none";if(cd.tabindex!=null){bw.tabIndex=cd.tabindex}if(cd.autofocus){bN()}if(!cd.gutter&&!cd.lineNumbers){aO.style.display="none"}if(p){b9.style.height="1px",b9.style.position="absolute"}if(g){aT.style.zIndex=-2;aT.style.visibility="hidden"}else{if(I){aT.style.minWidth="18px"}}try{br()}catch(ck){if(ck.message.match(/runtime/i)){ck=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")}throw ck}var cj=new C(),aE=new C(),c5;var cq,cO=new k([new an([new e("")])]),cw,cy;b6();var dc={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var cx,bB,a8,bI=0,bl,cD=false,cI=false;var cF,ci,aJ,c3,aX,bp,a0,cP;var bn=0,c6=0,bY=0,bZ=0;var ch;var bS=cV(0),cT=false,bA=true;var aw={};var bE=false;var cK=null;az(function(){a4(cd.value||"");cF=false})();var bi=new m();v(bu,"mousedown",az(cz));v(bu,"dblclick",az(b8));v(bG,"selectstart",Y);if(!U){v(bu,"contextmenu",ba)}v(bu,"scroll",cn);v(aT,"scroll",bO);v(aT,"mousedown",function(){if(cy){setTimeout(bN,0)}});var cm=v(window,"resize",function(){if(aL.parentNode){cs(true)}else{cm()}},true);v(bw,"keyup",az(cA));v(bw,"input",aY);v(bw,"keydown",az(cr));v(bw,"keypress",az(bx));v(bw,"focus",da);v(bw,"blur",aM);function bR(de){if(cd.onDragEvent&&cd.onDragEvent(co,T(de))){return}A(de)}if(cd.dragDrop){v(bu,"dragstart",aP);v(bu,"dragenter",bR);v(bu,"dragover",bR);v(bu,"drop",az(at))}v(bu,"paste",function(){bN();aY()});v(bw,"paste",aY);v(bw,"cut",az(function(){if(!cd.readOnly){bD("")}}));if(p){v(cl,"mouseup",function(){if(document.activeElement==bw){bw.blur()}bN()})}var cM;try{cM=(document.activeElement==bw)}catch(ck){}if(cM||cd.autofocus){setTimeout(da,20)}else{aM()}function bC(de){return de>=0&&de<cO.size}var co=aL.CodeMirror={getValue:ce,setValue:az(a4),getSelection:cf,replaceSelection:az(bD),focus:function(){window.focus();bN();da();aY()},setOption:function(df,dg){var de=cd[df];cd[df]=dg;if(df=="mode"||df=="indentUnit"){b6()}else{if(df=="readOnly"&&dg=="nocursor"){aM();bw.blur()}else{if(df=="readOnly"&&!dg){cR(true)}else{if(df=="theme"){cS()}else{if(df=="lineWrapping"&&de!=dg){az(cW)()}else{if(df=="tabSize"){cs(true)}else{if(df=="keyMap"){cL()}}}}}}}if(df=="lineNumbers"||df=="gutter"||df=="firstLineNumber"||df=="theme"||df=="lineNumberFormatter"){bo();cs(true)}},getOption:function(de){return cd[de]},undo:az(c9),redo:az(cZ),indentLine:az(function(df,de){if(typeof de!="string"){if(de==null){de=cd.smartIndent?"smart":"prev"}else{de=de?"add":"subtract"}}if(bC(df)){bM(df,de)}}),indentSelection:az(cQ),historySize:function(){return{undo:bi.done.length,redo:bi.undone.length}},clearHistory:function(){bi=new m()},setHistory:function(de){bi=new m();bi.done=de.done;bi.undone=de.undone},getHistory:function(){bi.time=0;return{done:bi.done.concat([]),undone:bi.undone.concat([])}},matchBrackets:az(function(){ct(true)}),getTokenAt:az(function(de){de=a1(de);return cV(de.line).getTokenAt(cq,cJ(de.line),cd.tabSize,de.ch)}),getStateAfter:function(de){de=cb(de==null?cO.size-1:de);return cJ(de+1)},cursorCoords:function(df,de){if(df==null){df=dc.inverted}return this.charCoords(df?dc.from:dc.to,de)},charCoords:function(df,de){df=a1(df);if(de=="local"){return c7(df,false)}if(de=="div"){return c7(df,true)}return av(df)},coordsChar:function(de){var df=ap(bG);return bV(de.x-df.left,de.y-df.top)},markText:az(bT),setBookmark:a2,findMarksAt:by,setMarker:az(b7),clearMarker:az(aC),setLineClass:az(bv),hideLine:az(function(de){return c0(de,true)}),showLine:az(function(de){return c0(de,false)}),onDeleteLine:function(de,df){if(typeof de=="number"){if(!bC(de)){return null}de=cV(de)}(de.handlers||(de.handlers=[])).push(df);return de},lineInfo:a3,getViewport:function(){return{from:c6,to:bY}},addWidget:function(di,dg,dk,dh,dm){di=c7(a1(di));var dj=di.yBot,df=di.x;dg.style.position="absolute";cl.appendChild(dg);if(dh=="over"){dj=di.y}else{if(dh=="near"){var de=Math.max(bu.offsetHeight,cO.height*b1()),dl=Math.max(cl.clientWidth,bG.clientWidth)-be();if(di.yBot+dg.offsetHeight>de&&di.y>dg.offsetHeight){dj=di.y-dg.offsetHeight}if(df+dg.offsetWidth>dl){df=dl-dg.offsetWidth}}}dg.style.top=(dj+cH())+"px";dg.style.left=dg.style.right="";if(dm=="right"){df=cl.clientWidth-dg.offsetWidth;dg.style.right="0px"}else{if(dm=="left"){df=0}else{if(dm=="middle"){df=(cl.clientWidth-dg.offsetWidth)/2}}dg.style.left=(df+be())+"px"}if(dk){aI(df,dj,df+dg.offsetWidth,dj+dg.offsetHeight)}},lineCount:function(){return cO.size},clipPos:a1,getCursor:function(de){if(de==null){de=dc.inverted}return ag(de?dc.from:dc.to)},somethingSelected:function(){return !aj(dc.from,dc.to)},setCursor:az(function(de,dg,df){if(dg==null&&typeof de.line=="number"){bg(de.line,de.ch,df)}else{bg(de,dg,df)}}),setSelection:az(function(dg,df,de){(de?bL:bJ)(a1(dg),a1(df||dg))}),getLine:function(de){if(bC(de)){return cV(de).text}},getLineHandle:function(de){if(bC(de)){return cV(de)}},setLine:az(function(de,df){if(bC(de)){b2(df,{line:de,ch:0},{line:de,ch:cV(de).text.length})}}),removeLine:az(function(de){if(bC(de)){b2("",{line:de,ch:0},a1({line:de+1,ch:0}))}}),replaceRange:az(b2),getRange:function(dg,df,de){return c4(a1(dg),a1(df),de)},triggerOnKeyDown:az(cr),execCommand:function(de){return R[de](co)},moveH:az(cU),deleteH:az(cC),moveV:az(cN),toggleOverwrite:function(){if(cD){cD=false;bm.className=bm.className.replace(" CodeMirror-overwrite","")}else{cD=true;bm.className+=" CodeMirror-overwrite"}},posFromIndex:function(df){var dg=0,de;cO.iter(0,cO.size,function(dh){var di=dh.text.length+1;if(di>df){de=df;return true}df-=di;++dg});return a1({line:dg,ch:de})},indexFromPos:function(df){if(df.line<0||df.ch<0){return 0}var de=df.ch;cO.iter(0,df.line,function(dg){de+=dg.text.length+1});return de},scrollTo:function(de,df){if(de!=null){bu.scrollLeft=de}if(df!=null){aT.scrollTop=bu.scrollTop=df}cs([])},getScrollInfo:function(){return{x:bu.scrollLeft,y:aT.scrollTop,height:aT.scrollHeight,width:bu.scrollWidth}},setSize:function(dg,de){function df(dh){dh=String(dh);return/^\d+$/.test(dh)?dh+"px":dh}if(dg!=null){aL.style.width=df(dg)}if(de!=null){bu.style.height=df(de)}co.refresh()},operation:function(de){return az(de)()},compoundChange:function(de){return b0(de)},refresh:function(){cs(true,null,bI);if(aT.scrollHeight>bI){aT.scrollTop=bI}},getInputField:function(){return bw},getWrapperElement:function(){return aL},getScrollerElement:function(){return bu},getGutterElement:function(){return aO}};function cV(de){return H(cO,de)}function bc(df,de){a0=true;var dg=de-df.height;for(var dh=df;dh;dh=dh.parent){dh.height+=dg}}function a4(de){var df={line:0,ch:0};aW(df,{line:cO.size-1,ch:cV(cO.size-1).text.length},D(de),df,df);cF=true}function ce(df){var de=[];cO.iter(0,cO.size,function(dg){de.push(dg.text)});return de.join(df||"\n")}function bO(de){if(aT.scrollTop!=bI){bI=bu.scrollTop=aT.scrollTop;cs([])}}function cn(de){if(cd.fixedGutter&&aO.style.left!=bu.scrollLeft+"px"){aO.style.left=bu.scrollLeft+"px"}if(bu.scrollTop!=bI){bI=bu.scrollTop;if(aT.scrollTop!=bI){aT.scrollTop=bI}cs([])}if(cd.onScroll){cd.onScroll(co)}}function cz(dr){bd(y(dr,"shiftKey"));for(var dk=j(dr);dk!=aL;dk=dk.parentNode){if(dk.parentNode==cl&&dk!=cv){return}}for(var dk=j(dr);dk!=aL;dk=dk.parentNode){if(dk.parentNode==a6){if(cd.onGutterClick){cd.onGutterClick(co,u(a6.childNodes,dk)+c6,dr)}return Y(dr)}}var df=bb(dr);switch(z(dr)){case 3:if(U){ba(dr)}return;case 2:if(df){bg(df.line,df.ch,true)}setTimeout(bN,20);Y(dr);return}if(!df){if(j(dr)==bu){Y(dr)}return}if(!cy){da()}var dg=+new Date,du="single";if(a8&&a8.time>dg-400&&aj(a8.pos,df)){du="triple";Y(dr);setTimeout(bN,20);aR(df.line)}else{if(bB&&bB.time>dg-400&&aj(bB.pos,df)){du="double";a8={time:dg,pos:df};Y(dr);var de=bF(df);bL(de.from,de.to)}else{bB={time:dg,pos:df}}}function dl(dw){if(h){bu.draggable=false}bl=false;dq();dj();if(Math.abs(dr.clientX-dw.clientX)+Math.abs(dr.clientY-dw.clientY)<10){Y(dw);bg(df.line,df.ch,true);bN()}}var dv=df,di;if(cd.dragDrop&&K&&!cd.readOnly&&!aj(dc.from,dc.to)&&!af(df,dc.from)&&!af(dc.to,df)&&du=="single"){if(h){bu.draggable=true}var dq=v(document,"mouseup",az(dl),true);var dj=v(bu,"drop",az(dl),true);bl=true;if(bu.dragDrop){bu.dragDrop()}return}Y(dr);if(du=="single"){bg(df.line,df.ch,true)}var dt=dc.from,dh=dc.to;function dn(dx){if(du=="single"){bL(df,dx)}else{if(du=="double"){var dw=bF(dx);if(af(dx,dt)){bL(dw.from,dh)}else{bL(dt,dw.to)}}else{if(du=="triple"){if(af(dx,dt)){bL(dh,a1({line:dx.line,ch:0}))}else{bL(dt,a1({line:dx.line+1,ch:0}))}}}}}function ds(dw){var dy=bb(dw,true);if(dy&&!aj(dy,dv)){if(!cy){da()}dv=dy;dn(dy);cF=false;var dx=bP();if(dy.line>=dx.to||dy.line<dx.from){di=setTimeout(az(function(){ds(dw)}),150)}}}function dp(dw){clearTimeout(di);var dx=bb(dw);if(dx){dn(dx)}Y(dw);bN();cF=true;dm();dq()}var dm=v(document,"mousemove",az(function(dw){clearTimeout(di);Y(dw);if(!O&&!z(dw)){dp(dw)}else{ds(dw)}}),true);var dq=v(document,"mouseup",az(dp),true)}function b8(de){for(var df=j(de);df!=aL;df=df.parentNode){if(df.parentNode==a6){return Y(de)}}Y(de)}function at(di){if(cd.onDragEvent&&cd.onDragEvent(co,T(di))){return}Y(di);var dl=bb(di,true),df=di.dataTransfer.files;if(!dl||cd.readOnly){return}if(df&&df.length&&window.FileReader&&window.File){var dk=df.length,dj=Array(dk),dg=0;var dh=function(dp,dn){var dm=new FileReader;dm.onload=function(){dj[dn]=dm.result;if(++dg==dk){dl=a1(dl);az(function(){var dq=b2(dj.join(""),dl,dl);bL(dl,dq)})()}};dm.readAsText(dp)};for(var de=0;de<dk;++de){dh(df[de],de)}}else{if(bl&&!(af(dl,dc.from)||af(dc.to,dl))){return}try{var dj=di.dataTransfer.getData("Text");if(dj){b0(function(){var dn=dc.from,dm=dc.to;bL(dl,dl);if(bl){b2("",dn,dm)}bD(dj);bN()})}}catch(di){}}}function aP(dg){var de=cf();dg.dataTransfer.setData("Text",de);if(U||al||Q){var df=ad("img");df.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=";dg.dataTransfer.setDragImage(df,0,0)}}function bs(dg,de){if(typeof dg=="string"){dg=R[dg];if(!dg){return false}}var df=cx;try{if(cd.readOnly){cI=true}if(de){cx=null}dg(co)}catch(dh){if(dh!=ah){throw dh}return false}finally{cx=df;cI=false}return true}var bQ;function c1(dk){var de=c(cd.keyMap),dh=de.auto;clearTimeout(bQ);if(dh&&!V(dk)){bQ=setTimeout(function(){if(c(cd.keyMap)==de){cd.keyMap=(dh.call?dh.call(null,co):dh)}},50)}var df=W[y(dk,"keyCode")],dj=false;if(df==null||dk.altGraphKey){return false}if(y(dk,"altKey")){df="Alt-"+df}if(y(dk,"ctrlKey")){df="Ctrl-"+df}if(y(dk,"metaKey")){df="Cmd-"+df}var di=false;function dg(){di=true}if(y(dk,"shiftKey")){dj=n("Shift-"+df,cd.extraKeys,cd.keyMap,function(dl){return bs(dl,true)},dg)||n(df,cd.extraKeys,cd.keyMap,function(dl){if(typeof dl=="string"&&/^go[A-Z]/.test(dl)){return bs(dl)}},dg)}else{dj=n(df,cd.extraKeys,cd.keyMap,bs,dg)}if(di){dj=false}if(dj){Y(dk);c2();if(O){dk.oldKeyCode=dk.keyCode;dk.keyCode=0}}return dj}function ca(dg,de){var df=n("'"+de+"'",cd.extraKeys,cd.keyMap,function(dh){return bs(dh,true)});if(df){Y(dg);c2()}return df}var cY=null;function cr(dg){if(!cy){da()}if(O&&dg.keyCode==27){dg.returnValue=false}if(bE){if(bX()){bE=false}}if(cd.onKeyEvent&&cd.onKeyEvent(co,T(dg))){return}var de=y(dg,"keyCode");bd(de==16||y(dg,"shiftKey"));var df=c1(dg);if(Q){cY=df?de:null;if(!df&&de==88&&y(dg,S?"metaKey":"ctrlKey")){bD("")}}}function bx(dh){if(bE){bX()}if(cd.onKeyEvent&&cd.onKeyEvent(co,T(dh))){return}var dg=y(dh,"keyCode"),de=y(dh,"charCode");if(Q&&dg==cY){cY=null;Y(dh);return}if(((Q&&(!dh.which||dh.which<10))||p)&&c1(dh)){return}var df=String.fromCharCode(de==null?dg:de);if(cd.electricChars&&cq.electricChars&&cd.smartIndent&&!cd.readOnly){if(cq.electricChars.indexOf(df)>-1){setTimeout(az(function(){bM(dc.to.line,"smart")}),75)}}if(ca(dh,df)){return}aY()}function cA(de){if(cd.onKeyEvent&&cd.onKeyEvent(co,T(de))){return}if(y(de,"keyCode")==16){cx=null}}function da(){if(cd.readOnly=="nocursor"){return}if(!cy){if(cd.onFocus){cd.onFocus(co)}cy=true;if(bu.className.search(/\bCodeMirror-focused\b/)==-1){bu.className+=" CodeMirror-focused"}if(!bp){cR(true)}}ar();c2()}function aM(){if(cy){if(cd.onBlur){cd.onBlur(co)}cy=false;if(ch){az(function(){if(ch){ch();ch=null}})()}bu.className=bu.className.replace(" CodeMirror-focused","")}clearInterval(c5);setTimeout(function(){if(!cy){cx=null}},150)}function aW(dj,di,dh,df,de){if(cI){return}if(bi){var dg=[];cO.iter(dj.line,di.line+1,function(dk){dg.push(dk.text)});bi.addChange(dj.line,dh.length,dg);while(bi.done.length>cd.undoDepth){bi.done.shift()}}aA(dj,di,dh,df,de)}function cp(dj,dk){if(!dj.length){return}var dl=dj.pop(),df=[];for(var dg=dl.length-1;dg>=0;dg-=1){var di=dl[dg];var dm=[],de=di.start+di.added;cO.iter(di.start,de,function(dn){dm.push(dn.text)});df.push({start:di.start,added:di.old.length,old:dm});var dh={line:di.start+di.old.length-1,ch:ab(dm[dm.length-1],di.old[di.old.length-1])};aA({line:di.start,ch:0},{line:de-1,ch:cV(de-1).text.length},di.old,dh,dh)}cF=true;dk.push(df)}function c9(){cp(bi.done,bi.undone)}function cZ(){cp(bi.undone,bi.done)}function aA(du,di,dA,de,dB){if(cI){return}var dz=false,dh=bS.text.length;if(!cd.lineWrapping){cO.iter(du.line,di.line+1,function(dC){if(!dC.hidden&&dC.text.length==dh){dz=true;return true}})}if(du.line!=di.line||dA.length>1){a0=true}var dr=di.line-du.line,dq=cV(du.line),df=cV(di.line);if(du.ch==0&&di.ch==0&&dA[dA.length-1]==""){var dn=[],dp=null;if(du.line){dp=cV(du.line-1);dp.fixMarkEnds(df)}else{df.fixMarkStarts()}for(var dw=0,dy=dA.length-1;dw<dy;++dw){dn.push(e.inheritMarks(dA[dw],dp))}if(dr){cO.remove(du.line,dr,cP)}if(dn.length){cO.insert(du.line,dn)}}else{if(dq==df){if(dA.length==1){dq.replace(du.ch,di.ch,dA[0])}else{df=dq.split(di.ch,dA[dA.length-1]);dq.replace(du.ch,null,dA[0]);dq.fixMarkEnds(df);var dn=[];for(var dw=1,dy=dA.length-1;dw<dy;++dw){dn.push(e.inheritMarks(dA[dw],dq))}dn.push(df);cO.insert(du.line+1,dn)}}else{if(dA.length==1){dq.replace(du.ch,null,dA[0]);df.replace(null,di.ch,"");dq.append(df);cO.remove(du.line+1,dr,cP)}else{var dn=[];dq.replace(du.ch,null,dA[0]);df.replace(null,di.ch,dA[dA.length-1]);dq.fixMarkEnds(df);for(var dw=1,dy=dA.length-1;dw<dy;++dw){dn.push(e.inheritMarks(dA[dw],dq))}if(dr>1){cO.remove(du.line+1,dr-1,cP)}cO.insert(du.line+1,dn)}}}if(cd.lineWrapping){var dk=Math.max(5,bu.clientWidth/br()-3);cO.iter(du.line,du.line+dA.length,function(dC){if(dC.hidden){return}var dD=Math.ceil(dC.text.length/dk)||1;if(dD!=dC.height){bc(dC,dD)}})}else{cO.iter(du.line,du.line+dA.length,function(dD){var dC=dD.text;if(!dD.hidden&&dC.length>dh){bS=dD;dh=dC.length;bA=true;dz=false}});if(dz){cT=true}}var dg=[],dm=dA.length-dr-1;for(var dw=0,dt=cw.length;dw<dt;++dw){var dx=cw[dw];if(dx<du.line){dg.push(dx)}else{if(dx>di.line){dg.push(dx+dm)}}}var dv=du.line+Math.min(dA.length,500);cX(du.line,dv);dg.push(dv);cw=dg;bU(100);aJ.push({from:du.line,to:di.line+1,diff:dm});var dl={from:du,to:di,text:dA};if(c3){for(var dj=c3;dj.next;dj=dj.next){}dj.next=dl}else{c3=dl}function ds(dC){return dC<=Math.min(di.line,di.line+dm)?dC:dC+dm}bJ(a1(de),a1(dB),ds(dc.from.line),ds(dc.to.line))}function ax(){var de=cO.height*b1()+2*cH();return de*0.99>bu.offsetHeight?de:false}function aB(df){var de=ax();aT.style.display=de?"block":"none";if(de){cB.style.height=cl.style.minHeight=de+"px";aT.style.height=bu.clientHeight+"px";if(df!=null){aT.scrollTop=bu.scrollTop=df;if(h){setTimeout(function(){if(aT.scrollTop!=df){return}aT.scrollTop=df+(df?-1:1);aT.scrollTop=df},0)}}}else{cl.style.minHeight=""}cv.style.top=bn*b1()+"px"}function bK(){bS=cV(0);bA=true;var de=bS.text.length;cO.iter(1,cO.size,function(dg){var df=dg.text;if(!dg.hidden&&df.length>de){de=df.length;bS=dg}});cT=false}function b2(df,di,dh){di=a1(di);if(!dh){dh=di}else{dh=a1(dh)}df=D(df);function dg(dl){if(af(dl,di)){return dl}if(!af(dh,dl)){return de}var dj=dl.line+df.length-(dh.line-di.line)-1;var dk=dl.ch;if(dl.line==dh.line){dk+=df[df.length-1].length-(dh.ch-(dh.line==di.line?di.ch:0))}return{line:dj,ch:dk}}var de;aK(df,di,dh,function(dj){de=dj;return{from:dg(dc.from),to:dg(dc.to)}});return de}function bD(de,df){aK(D(de),dc.from,dc.to,function(dg){if(df=="end"){return{from:dg,to:dg}}else{if(df=="start"){return{from:dc.from,to:dc.from}}else{return{from:dc.from,to:dg}}}})}function aK(dh,dj,di,de){var dg=dh.length==1?dh[0].length+dj.ch:dh[dh.length-1].length;var df=de({line:dj.line+dh.length-1,ch:dg});aW(dj,di,dh,df.from,df.to)}function c4(dj,di,dh){var df=dj.line,de=di.line;if(df==de){return cV(df).text.slice(dj.ch,di.ch)}var dg=[cV(df).text.slice(dj.ch)];cO.iter(df+1,de,function(dk){dg.push(dk.text)});dg.push(cV(de).text.slice(0,di.ch));return dg.join(dh||"\n")}function cf(de){return c4(dc.from,dc.to,de)}function ar(){if(bE){return}cj.set(cd.pollInterval,function(){aV();bX();if(cy){ar()}aG()})}function aY(){var de=false;bE=true;function df(){aV();var dg=bX();if(!dg&&!de){de=true;cj.set(60,df)}else{bE=false;ar()}aG()}cj.set(20,df)}var bk="";function bX(){if(bp||!cy||ak(bw)||cd.readOnly){return false}var df=bw.value;if(df==bk){return false}cx=null;var dg=0,de=Math.min(bk.length,df.length);while(dg<de&&bk[dg]==df[dg]){++dg}if(dg<bk.length){dc.from={line:dc.from.line,ch:dc.from.ch-(bk.length-dg)}}else{if(cD&&aj(dc.from,dc.to)){dc.to={line:dc.to.line,ch:Math.min(cV(dc.to.line).text.length,dc.to.ch+(df.length-dg))}}}bD(df.slice(dg),"end");if(df.length>1000){bw.value=bk=""}else{bk=df}return true}function cR(de){if(!aj(dc.from,dc.to)){bk="";bw.value=cf();if(cy){a(bw)}}else{if(de){bk=bw.value=""}}}function bN(){if(cd.readOnly!="nocursor"){bw.focus()}}function cu(){var dh=b3();aI(dh.x,dh.y,dh.x,dh.yBot);if(!cy){return}var df=cl.getBoundingClientRect(),de=null;if(dh.y+df.top<0){de=true}else{if(dh.y+df.top+b1()>(window.innerHeight||document.documentElement.clientHeight)){de=false}}if(de!=null){var dg=bm.style.display=="none";if(dg){bm.style.display="";bm.style.left=dh.x+"px";bm.style.top=(dh.y-bn)+"px"}bm.scrollIntoView(de);if(dg){bm.style.display="none"}}}function b3(){var df=c7(dc.inverted?dc.from:dc.to);var de=cd.lineWrapping?Math.min(df.x,bG.offsetWidth):df.x;return{x:de,y:df.y,yBot:df.yBot}}function aI(df,dh,de,dg){var di=a7(df,dh,de,dg);if(di.scrollLeft!=null){bu.scrollLeft=di.scrollLeft}if(di.scrollTop!=null){aT.scrollTop=bu.scrollTop=di.scrollTop}}function a7(dh,dp,df,dn){var dk=be(),du=cH();dp+=du;dn+=du;dh+=dk;df+=dk;var dr=bu.clientHeight,di=aT.scrollTop,dt={};var dg=ax()||Infinity;var de=dp<du+10,dm=dn+du>dg-10;if(dp<di){dt.scrollTop=de?0:Math.max(0,dp)}else{if(dn>di+dr){dt.scrollTop=(dm?dg:dn)-dr}}var dq=bu.clientWidth,ds=bu.scrollLeft;var dl=cd.fixedGutter?aO.clientWidth:0;var dj=dh<dl+dk+10;if(dh<ds+dl||dj){if(dj){dh=0}dt.scrollLeft=Math.max(0,dh-10-dl)}else{if(df>dq+ds-3){dt.scrollLeft=df+10-dq}}return dt}function bP(di){var de=b1(),dh=(di!=null?di:aT.scrollTop)-cH();var dg=Math.max(0,Math.floor(dh/de));var df=Math.ceil((dh+bu.clientHeight)/de);return{from:ac(cO,dg),to:ac(cO,df)}}function cs(dn,dj,dh){if(!bu.clientWidth){c6=bY=bn=0;return}var di=bP(dh);if(dn!==true&&dn.length==0&&di.from>c6&&di.to<bY){aB(dh);return}var dp=Math.max(di.from-100,0),dq=Math.min(cO.size,di.to+100);if(c6<dp&&dp-c6<20){dp=c6}if(bY>dq&&bY-dq<20){dq=Math.min(cO.size,bY)}var ds=dn===true?[]:cc([{from:c6,to:bY,domStart:0}],dn);var dm=0;for(var dk=0;dk<ds.length;++dk){var dl=ds[dk];if(dl.from<dp){dl.domStart+=(dp-dl.from);dl.from=dp}if(dl.to>dq){dl.to=dq}if(dl.from>=dl.to){ds.splice(dk--,1)}else{dm+=dl.to-dl.from}}if(dm==dq-dp&&dp==c6&&dq==bY){aB(dh);return}ds.sort(function(du,dt){return du.domStart-dt.domStart});var dg=b1(),de=aO.style.display;ay.style.display="none";aZ(dp,dq,ds);ay.style.display=aO.style.display="";var df=dp!=c6||dq!=bY||bZ!=bu.clientHeight+dg;if(df){bZ=bu.clientHeight+dg}if(dp!=c6||dq!=bY&&cd.onViewportChange){setTimeout(function(){if(cd.onViewportChange){cd.onViewportChange(co,dp,dq)}})}c6=dp;bY=dq;bn=f(cO,dp);if(ay.childNodes.length!=bY-c6){throw new Error("BAD PATCH! "+JSON.stringify(ds)+" size="+(bY-c6)+" nodes="+ay.childNodes.length)}function dr(){var du=ay.firstChild,dt=false;cO.iter(c6,bY,function(dw){if(!du){return}if(!dw.hidden){var dv=Math.round(du.offsetHeight/dg)||1;if(dw.height!=dv){bc(dw,dv);a0=dt=true}}du=du.nextSibling});return dt}if(cd.lineWrapping){dr()}aO.style.display=de;if(df||a0){aS()&&cd.lineWrapping&&dr()&&aS()}aB(dh);db();if(!dj&&cd.onUpdate){cd.onUpdate(co)}return true}function cc(dn,dl){for(var di=0,dg=dl.length||0;di<dg;++di){var dk=dl[di],de=[],dm=dk.diff||0;for(var dh=0,df=dn.length;dh<df;++dh){var dj=dn[dh];if(dk.to<=dj.from&&dk.diff){de.push({from:dj.from+dm,to:dj.to+dm,domStart:dj.domStart})}else{if(dk.to<=dj.from||dk.from>=dj.to){de.push(dj)}else{if(dk.from>dj.from){de.push({from:dj.from,to:dk.from,domStart:dj.domStart})}if(dk.to<dj.to){de.push({from:dk.to+dm,to:dj.to+dm,domStart:dj.domStart+(dk.to-dj.from)})}}}}dn=de}return dn}function aZ(dm,dn,dq){function de(ds){var dr=ds.nextSibling;ds.parentNode.removeChild(ds);return dr}if(!dq.length){E(ay)}else{var di=0,dg=ay.firstChild,df;for(var dj=0;dj<dq.length;++dj){var dp=dq[dj];while(dp.domStart>di){dg=de(dg);di++}for(var dh=0,dl=dp.to-dp.from;dh<dl;++dh){dg=dg.nextSibling;di++}}while(dg){dg=de(dg)}}var dk=dq.shift(),dg=ay.firstChild,dh=dm;cO.iter(dm,dn,function(dr){if(dk&&dk.to==dh){dk=dq.shift()}if(!dk||dk.from>dh){if(dr.hidden){var ds=ad("pre")}else{var ds=dr.getElement(bj);if(dr.className){ds.className=dr.className}if(dr.bgClassName){var dt=ad("pre","\u00a0",dr.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");ds=ad("div",[dt,ds],null,"position: relative")}}ay.insertBefore(ds,dg)}else{dg=dg.nextSibling}++dh})}function aS(){if(!cd.gutter&&!cd.lineNumbers){return}var df=cv.offsetHeight,dn=bu.clientHeight;aO.style.height=(df-dn<2?dn:df)+"px";var dl=document.createDocumentFragment(),dj=c6,dm;cO.iter(c6,Math.max(bY,c6+1),function(dq){if(dq.hidden){dl.appendChild(ad("pre"))}else{var dp=dq.gutterMarker;var dt=cd.lineNumbers?cd.lineNumberFormatter(dj+cd.firstLineNumber):null;if(dp&&dp.text){dt=dp.text.replace("%N%",dt!=null?dt:"")}else{if(dt==null){dt="\u00a0"}}var ds=dl.appendChild(ad("pre",null,dp&&dp.style));ds.innerHTML=dt;for(var dr=1;dr<dq.height;++dr){ds.appendChild(ad("br"));ds.appendChild(document.createTextNode("\u00a0"))}if(!dp){dm=dj}}++dj});aO.style.display="none";q(a6,dl);if(dm!=null&&cd.lineNumbers){var dh=a6.childNodes[dm-c6];var di=String(cO.size).length,de=M(dh.firstChild),dg="";while(de.length+dg.length<di){dg+="\u00a0"}if(dg){dh.insertBefore(document.createTextNode(dg),dh.firstChild)}}aO.style.display="";var dk=Math.abs((parseInt(bG.style.marginLeft)||0)-aO.offsetWidth)>2;bG.style.marginLeft=aO.offsetWidth+"px";a0=false;return dk}function db(){var dh=aj(dc.from,dc.to);var dt=c7(dc.from,true);var dn=dh?dt:c7(dc.to,true);var dl=dc.inverted?dt:dn,df=b1();var de=ap(aL),dg=ap(ay);b9.style.top=Math.max(0,Math.min(bu.offsetHeight,dl.y+dg.top-de.top))+"px";b9.style.left=Math.max(0,Math.min(bu.offsetWidth,dl.x+dg.left-de.left))+"px";if(dh){bm.style.top=dl.y+"px";bm.style.left=(cd.lineWrapping?Math.min(dl.x,bG.offsetWidth):dl.x)+"px";bm.style.display="";bq.style.display="none"}else{var dr=dt.y==dn.y,dk=document.createDocumentFragment();var dp=bG.clientWidth||bG.offsetWidth;var dj=bG.clientHeight||bG.offsetHeight;var ds=function(dy,dx,dw,du){var dv=J?"width: "+(!dw?dp:dp-dw-dy)+"px":"right: "+dw+"px";dk.appendChild(ad("div",null,"CodeMirror-selected","position: absolute; left: "+dy+"px; top: "+dx+"px; "+dv+"; height: "+du+"px"))};if(dc.from.ch&&dt.y>=0){var dq=dr?dp-dn.x:0;ds(dt.x,dt.y,dq,df)}var di=Math.max(0,dt.y+(dc.from.ch?df:0));var dm=Math.min(dn.y,dj)-di;if(dm>0.2*df){ds(0,di,0,dm)}if((!dr||!dc.from.ch)&&dn.y<dj-0.5*df){ds(0,dn.y,dp-dn.x,df)}q(bq,dk);bm.style.display="none";bq.style.display=""}}function bd(de){if(de){cx=cx||(dc.inverted?dc.to:dc.from)}else{cx=null}}function bL(dg,df){var de=cx&&a1(cx);if(de){if(af(de,dg)){dg=de}else{if(af(df,de)){df=de}}}bJ(dg,df);ci=true}function bJ(dl,dk,de,dj){cK=null;if(de==null){de=dc.from.line;dj=dc.to.line}if(aj(dc.from,dl)&&aj(dc.to,dk)){return}if(af(dk,dl)){var dh=dk;dk=dl;dl=dh}if(dl.line!=de){var di=b4(dl,de,dc.from.ch);if(!di){c0(dl.line,false)}else{dl=di}}if(dk.line!=dj){dk=b4(dk,dj,dc.to.ch)}if(aj(dl,dk)){dc.inverted=false}else{if(aj(dl,dc.to)){dc.inverted=false}else{if(aj(dk,dc.from)){dc.inverted=true}}}if(cd.autoClearEmptyLines&&aj(dc.from,dc.to)){var dg=dc.inverted?dl:dk;if(dg.line!=dc.from.line&&dc.from.line<cO.size){var df=cV(dc.from.line);if(/^\s+$/.test(df.text)){setTimeout(az(function(){if(df.parent&&/^\s+$/.test(df.text)){var dm=ae(df);b2("",{line:dm,ch:0},{line:dm,ch:df.text.length})}},10))}}}dc.from=dl;dc.to=dk;aX=true}function b4(dj,df,dg){function di(dm){var dp=dj.line+dm,dl=dm==1?cO.size:-1;while(dp!=dl){var dk=cV(dp);if(!dk.hidden){var dn=dj.ch;if(dh||dn>dg||dn>dk.text.length){dn=dk.text.length}return{line:dp,ch:dn}}dp+=dm}}var de=cV(dj.line);var dh=dj.ch==de.text.length&&dj.ch!=dg;if(!de.hidden){return dj}if(dj.line>=df){return di(1)||di(-1)}else{return di(-1)||di(1)}}function bg(de,dg,df){var dh=a1({line:de,ch:dg||0});(df?bL:bJ)(dh,dh)}function cb(de){return Math.max(0,Math.min(de,cO.size-1))}function a1(dg){if(dg.line<0){return{line:0,ch:0}}if(dg.line>=cO.size){return{line:cO.size-1,ch:cV(cO.size-1).text.length}}var de=dg.ch,df=cV(dg.line).text.length;if(de==null||de>df){return{line:dg.line,ch:df}}else{if(de<0){return{line:dg.line,ch:0}}else{return dg}}}function cE(dh,dl){var di=dc.inverted?dc.from:dc.to,dm=di.line,de=di.ch;var dk=cV(dm);function df(){for(var dn=dm+dh,dq=dh<0?-1:cO.size;dn!=dq;dn+=dh){var dp=cV(dn);if(!dp.hidden){dm=dn;dk=dp;return true}}}function dj(dn){if(de==(dh<0?0:dk.text.length)){if(!dn&&df()){de=dh<0?dk.text.length:0}else{return false}}else{de+=dh}return true}if(dl=="char"){dj()}else{if(dl=="column"){dj(true)}else{if(dl=="word"){var dg=false;for(;;){if(dh<0){if(!dj()){break}}if(am(dk.text.charAt(de))){dg=true}else{if(dg){if(dh<0){dh=1;dj()}break}}if(dh>0){if(!dj()){break}}}}}}return{line:dm,ch:de}}function cU(de,df){var dg=de<0?dc.from:dc.to;if(cx||aj(dc.from,dc.to)){dg=cE(de,df)}bg(dg.line,dg.ch,true)}function cC(de,df){if(!aj(dc.from,dc.to)){b2("",dc.from,dc.to)}else{if(de<0){b2("",cE(de,df),dc.to)}else{b2("",dc.from,cE(de,df))}}ci=true}function cN(df,dh){var dj=0,dk=c7(dc.inverted?dc.from:dc.to,true);if(cK!=null){dk.x=cK}if(dh=="page"){var de=Math.min(bu.clientHeight,window.innerHeight||document.documentElement.clientHeight);var di=bV(dk.x,dk.y+de*df)}else{if(dh=="line"){var dg=b1();var di=bV(dk.x,dk.y+0.5*dg+df*dg)}}if(dh=="page"){aT.scrollTop+=c7(di,true).y-dk.y}bg(di.line,di.ch,true);cK=dk.x}function bF(dj){var dh=cV(dj.line).text;var di=dj.ch,dg=dj.ch;if(dh){if(dj.after===false||dg==dh.length){--di}else{++dg}var df=dh.charAt(di);var de=am(df)?am:/\s/.test(df)?function(dk){return/\s/.test(dk)}:function(dk){return !/\s/.test(dk)&&!am(dk)};while(di>0&&de(dh.charAt(di-1))){--di}while(dg<dh.length&&de(dh.charAt(dg))){++dg}}return{from:{line:dj.line,ch:di},to:{line:dj.line,ch:dg}}}function aR(de){bL({line:de,ch:0},a1({line:de+1,ch:0}))}function cQ(dg){if(aj(dc.from,dc.to)){return bM(dc.from.line,dg)}var df=dc.to.line-(dc.to.ch?0:1);for(var de=dc.from.line;de<=df;++de){bM(de,dg)}}function bM(dg,dn){if(!dn){dn="add"}if(dn=="smart"){if(!cq.indent){dn="prev"}else{var de=cJ(dg)}}var dp=cV(dg),di=dp.indentation(cd.tabSize),df=dp.text.match(/^\s*/)[0],dk;if(dn=="smart"){dk=cq.indent(de,dp.text.slice(df.length),dp.text);if(dk==ah){dn="prev"}}if(dn=="prev"){if(dg){dk=cV(dg-1).indentation(cd.tabSize)}else{dk=0}}else{if(dn=="add"){dk=di+cd.indentUnit}else{if(dn=="subtract"){dk=di-cd.indentUnit}}}dk=Math.max(0,dk);var dm=dk-di;var dl="",dj=0;if(cd.indentWithTabs){for(var dh=Math.floor(dk/cd.tabSize);dh;--dh){dj+=cd.tabSize;dl+="\t"}}while(dj<dk){++dj;dl+=" "}if(dl!=df){b2(dl,{line:dg,ch:0},{line:dg,ch:df.length})}}function b6(){cq=x.getMode(cd,cd.mode);cO.iter(0,cO.size,function(de){de.stateAfter=null});cw=[0];bU()}function bo(){var de=cd.gutter||cd.lineNumbers;aO.style.display=de?"":"none";if(de){a0=true}else{ay.parentNode.style.marginLeft=0}}function cW(dg,df){if(cd.lineWrapping){aL.className+=" CodeMirror-wrap";var de=bu.clientWidth/br()-3;cO.iter(0,cO.size,function(dh){if(dh.hidden){return}var di=Math.ceil(dh.text.length/de)||1;if(di!=1){bc(dh,di)}});bG.style.minWidth=bf.style.left=""}else{aL.className=aL.className.replace(" CodeMirror-wrap","");bK();cO.iter(0,cO.size,function(dh){if(dh.height!=1&&!dh.hidden){bc(dh,1)}})}aJ.push({from:0,to:cO.size})}function bj(df){var de=cd.tabSize-df%cd.tabSize,di=aw[de];if(di){return di}for(var dj="",dg=0;dg<de;++dg){dj+=" "}var dh=ad("span",dj,"cm-tab");return(aw[de]={element:dh,width:de})}function cS(){bu.className=bu.className.replace(/\s*cm-s-\S+/g,"")+cd.theme.replace(/(^|\s)\s*/g," cm-s-")}function cL(){var de=B[cd.keyMap].style;aL.className=aL.className.replace(/\s*cm-keymap-\S+/g,"")+(de?" cm-keymap-"+de:"")}function dd(){this.set=[]}dd.prototype.clear=az(function(){var dj=Infinity,df=-Infinity;for(var di=0,dl=this.set.length;di<dl;++di){var dg=this.set[di],de=dg.marked;if(!de||!dg.parent){continue}var dk=ae(dg);dj=Math.min(dj,dk);df=Math.max(df,dk);for(var dh=0;dh<de.length;++dh){if(de[dh].marker==this){de.splice(dh--,1)}}}if(dj!=Infinity){aJ.push({from:dj,to:df+1})}});dd.prototype.find=function(){var dj,dk;for(var dg=0,di=this.set.length;dg<di;++dg){var dm=this.set[dg],dh=dm.marked;for(var df=0;df<dh.length;++df){var de=dh[df];if(de.marker==this){if(de.from!=null||de.to!=null){var dl=ae(dm);if(dl!=null){if(de.from!=null){dj={line:dl,ch:de.from}}if(de.to!=null){dk={line:dl,ch:de.to}}}}}}}return{from:dj,to:dk}};function bT(dk,dj,dg){dk=a1(dk);dj=a1(dj);var de=new dd();if(!af(dk,dj)){return de}function di(dl,dp,dn,dm){cV(dl).addMark(new P(dp,dn,dm,de))}if(dk.line==dj.line){di(dk.line,dk.ch,dj.ch,dg)}else{di(dk.line,dk.ch,null,dg);for(var df=dk.line+1,dh=dj.line;df<dh;++df){di(df,null,null,dg)}di(dj.line,null,dj.ch,dg)}aJ.push({from:dk.line,to:dj.line+1});return de}function a2(df){df=a1(df);var de=new L(df.ch);cV(df.line).addMark(de);return de}function by(dj){dj=a1(dj);var di=[],dg=cV(dj.line).marked;if(!dg){return di}for(var df=0,dh=dg.length;df<dh;++df){var de=dg[df];if((de.from==null||de.from<=dj.ch)&&(de.to==null||de.to>=dj.ch)){di.push(de.marker||de)}}return di}function b7(de,dg,df){if(typeof de=="number"){de=cV(cb(de))}de.gutterMarker={text:dg,style:df};a0=true;return de}function aC(de){if(typeof de=="number"){de=cV(cb(de))}de.gutterMarker=null;a0=true}function a5(df,dh){var dg=df,de=df;if(typeof df=="number"){de=cV(cb(df))}else{dg=ae(df)}if(dg==null){return null}if(dh(de,dg)){aJ.push({from:dg,to:dg+1})}else{return null}return de}function bv(df,de,dg){return a5(df,function(dh){if(dh.className!=de||dh.bgClassName!=dg){dh.className=de;dh.bgClassName=dg;return true}})}function c0(df,de){return a5(df,function(dg,dj){if(dg.hidden!=de){dg.hidden=de;if(!cd.lineWrapping){if(de&&dg.text.length==bS.text.length){cT=true}else{if(!de&&dg.text.length>bS.text.length){bS=dg;cT=false}}}bc(dg,de?0:1);var di=dc.from.line,dh=dc.to.line;if(de&&(di==dj||dh==dj)){var dl=di==dj?b4({line:di,ch:0},di,0):dc.from;var dk=dh==dj?b4({line:dh,ch:0},dh,0):dc.to;if(!dk){return}bJ(dl,dk)}return(a0=true)}})}function a3(df){if(typeof df=="number"){if(!bC(df)){return null}var dg=df;df=cV(df);if(!df){return null}}else{var dg=ae(df);if(dg==null){return null}}var de=df.gutterMarker;return{line:dg,handle:df,text:df.text,markerText:de&&de.text,markerClass:de&&de.style,lineClass:df.className,bgClass:df.bgClassName}}function aN(dr,dk){if(dk<=0){return 0}var dh=cV(dr),dn=dh.text;function dp(ds){return cg(dh,ds).left}var dl=0,dj=0,dm=dn.length,di;var df=Math.min(dm,Math.ceil(dk/br()));for(;;){var dg=dp(df);if(dg<=dk&&df<dm){df=Math.min(dm,Math.ceil(df*1.2))}else{di=dg;dm=df;break}}if(dk>di){return dm}df=Math.floor(dm*0.8);dg=dp(df);if(dg<dk){dl=df;dj=dg}for(;;){if(dm-dl<=1){return(di-dk>dk-dj)?dl:dm}var dq=Math.ceil((dl+dm)/2),de=dp(dq);if(de>dk){dm=dq;di=de}else{dl=dq;dj=de}}}function cg(df,di){if(di==0){return{top:0,left:0}}var de=cd.lineWrapping&&di<df.text.length&&s.test(df.text.slice(di-1,di+1));var dl=df.getElement(bj,di,de);q(aD,dl);var dh=dl.anchor;var dk=dh.offsetTop,dj=dh.offsetLeft;if(O&&dk==0&&dj==0){var dg=ad("span","x");dh.parentNode.insertBefore(dg,dh.nextSibling);dk=dg.offsetTop}return{top:dk,left:dj}}function c7(dj,dh){var de,df=b1(),di=df*(f(cO,dj.line)-(dh?bn:0));if(dj.ch==0){de=0}else{var dg=cg(cV(dj.line),dj.ch);de=dg.left;if(cd.lineWrapping){di+=Math.max(0,dg.top)}}return{x:de,y:di,yBot:di+df}}function bV(dq,dp){var dm=b1(),dj=br(),dw=bn+Math.floor(dp/dm);if(dw<0){return{line:0,ch:0}}var dr=ac(cO,dw);if(dr>=cO.size){return{line:cO.size-1,ch:cV(cO.size-1).text.length}}var df=cV(dr),dt=df.text;var dy=cd.lineWrapping,dn=dy?dw-f(cO,dr):0;if(dq<=0&&dn==0){return{line:dr,ch:0}}var dk=false;function dx(dA){var dB=cg(df,dA);if(dy){var dC=Math.round(dB.top/dm);dk=dC!=dn;return Math.max(0,dB.left+(dC-dn)*bu.clientWidth)}return dB.left}var dv=0,du=0,dg=dt.length,de;var ds=Math.min(dg,Math.ceil((dq+dn*bu.clientWidth*0.9)/dj));for(;;){var dl=dx(ds);if(dl<=dq&&ds<dg){ds=Math.min(dg,Math.ceil(ds*1.2))}else{de=dl;dg=ds;break}}if(dq>de){return{line:dr,ch:dg}}ds=Math.floor(dg*0.8);dl=dx(ds);if(dl<dq){dv=ds;du=dl}for(;;){if(dg-dv<=1){var di=dq-du<de-dq;return{line:dr,ch:di?dv:dg,after:di}}var dz=Math.ceil((dv+dg)/2),dh=dx(dz);if(dh>dq){dg=dz;de=dh;if(dk){de+=1000}}else{dv=dz;du=dh}}}function av(dg){var de=c7(dg,true),df=ap(bG);return{x:df.left+de.x,y:df.top+de.y,yBot:df.top+de.yBot}}var a9,aF,au;function b1(){if(au==null){au=ad("pre");for(var df=0;df<49;++df){au.appendChild(document.createTextNode("x"));au.appendChild(ad("br"))}au.appendChild(document.createTextNode("x"))}var de=ay.clientHeight;if(de==aF){return a9}aF=de;q(aD,au.cloneNode(true));a9=aD.firstChild.offsetHeight/50||1;E(aD);return a9}var c8,bH=0;function br(){if(bu.clientWidth==bH){return c8}bH=bu.clientWidth;var de=ad("span","x");var df=ad("pre",[de]);q(aD,df);return(c8=de.offsetWidth||10)}function cH(){return bG.offsetTop}function be(){return bG.offsetLeft}function bb(di,dh){var dg=ap(bu,true),de,dj;try{de=di.clientX;dj=di.clientY}catch(di){return null}if(!dh&&(de-dg.left>bu.clientWidth||dj-dg.top>bu.clientHeight)){return null}var df=ap(bG,true);return bV(de-df.left,dj-df.top)}function ba(df){var dk=bb(df),dj=aT.scrollTop;if(!dk||Q){return}if(aj(dc.from,dc.to)||af(dk,dc.from)||!af(dk,dc.to)){az(bg)(dk.line,dk.ch)}var di=bw.style.cssText;b9.style.position="absolute";bw.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(df.clientY-5)+"px; left: "+(df.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";bp=true;var dh=bw.value=cf();bN();a(bw);function de(){var dl=D(bw.value).join("\n");if(dl!=dh&&!cd.readOnly){az(bD)(dl,"end")}b9.style.position="relative";bw.style.cssText=di;if(F){aT.scrollTop=dj}bp=false;cR(true);ar()}if(U){A(df);var dg=v(window,"mouseup",function(){dg();setTimeout(de,20)},true)}else{setTimeout(de,50)}}function c2(){clearInterval(c5);var de=true;bm.style.visibility="";c5=setInterval(function(){bm.style.visibility=(de=!de)?"":"hidden"},cd.cursorBlinkRate)}var bz={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function ct(dk){var de=dc.inverted?dc.from:dc.to,dm=cV(de.line),df=de.ch-1;var dj=(df>=0&&bz[dm.text.charAt(df)])||bz[dm.text.charAt(++df)];if(!dj){return}var dn=dj.charAt(0),dl=dj.charAt(1)==">",dy=dl?1:-1,dt=dm.styles;for(var dz=df+1,dv=0,dx=dt.length;dv<dx;dv+=2){if((dz-=dt[dv].length)<=0){var dw=dt[dv+1];break}}var dh=[dm.text.charAt(df)],ds=/[(){}[\]]/;function dq(dL,dG,dH){if(!dL.text){return}var dK=dL.styles,dF=dl?0:dL.text.length-1,dI;for(var dC=dl?0:dK.length-2,dE=dl?dK.length:-2;dC!=dE;dC+=2*dy){var dJ=dK[dC];if(dK[dC+1]!=dw){dF+=dy*dJ.length;continue}for(var dB=dl?0:dJ.length-1,dA=dl?dJ.length:-1;dB!=dA;dB+=dy,dF+=dy){if(dF>=dG&&dF<dH&&ds.test(dI=dJ.charAt(dB))){var dD=bz[dI];if(dD.charAt(1)==">"==dl){dh.push(dI)}else{if(dh.pop()!=dD.charAt(0)){return{pos:dF,match:false}}else{if(!dh.length){return{pos:dF,match:true}}}}}}}}for(var dv=de.line,dx=dl?Math.min(dv+100,cO.size):Math.max(-1,dv-100);dv!=dx;dv+=dy){var dm=cV(dv),di=dv==de.line;var dp=dq(dm,di&&dl?df+1:0,di&&!dl?df:dm.text.length);if(dp){break}}if(!dp){dp={pos:null,match:false}}var dw=dp.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var du=bT({line:de.line,ch:df},{line:de.line,ch:df+1},dw),dg=dp.pos!=null&&bT({line:dv,ch:dp.pos},{line:dv,ch:dp.pos+1},dw);var dr=az(function(){du.clear();dg&&dg.clear()});if(dk){setTimeout(dr,800)}else{ch=dr}}function bh(dk){var dj,dg;for(var df=dk,dh=dk-40;df>dh;--df){if(df==0){return 0}var de=cV(df-1);if(de.stateAfter){return df}var di=de.indentation(cd.tabSize);if(dg==null||dj>di){dg=df-1;dj=di}}return dg}function cJ(dg){var df=bh(dg),de=df&&cV(df-1).stateAfter;if(!de){de=aa(cq)}else{de=t(cq,de)}cO.iter(df,dg,function(dh){dh.highlight(cq,de,cd.tabSize);dh.stateAfter=t(cq,de)});if(df<dg){aJ.push({from:df,to:dg})}if(dg<cO.size&&!cV(dg).stateAfter){cw.push(dg)}return de}function cX(dg,de){var df=cJ(dg);cO.iter(dg,de,function(dh){dh.highlight(cq,df,cd.tabSize);dh.stateAfter=t(cq,df)})}function b5(){var dk=+new Date+cd.workTime;var dn=cw.length;while(cw.length){if(!cV(c6).stateAfter){var dh=c6}else{var dh=cw.pop()}if(dh>=cO.size){continue}var df=bh(dh),de=df&&cV(df-1).stateAfter;if(de){de=t(cq,de)}else{de=aa(cq)}var dj=0,dg=cq.compareStates,dm=false,dl=df,di=false;cO.iter(dl,cO.size,function(dq){var dr=dq.stateAfter;if(+new Date>dk){cw.push(dl);bU(cd.workDelay);if(dm){aJ.push({from:dh,to:dl+1})}return(di=true)}var ds=dq.highlight(cq,de,cd.tabSize);if(ds){dm=true}dq.stateAfter=t(cq,de);var dp=null;if(dg){var dt=dr&&dg(dr,de);if(dt!=ah){dp=!!dt}}if(dp==null){if(ds!==false||!dr){dj=0}else{if(++dj>3&&(!cq.indent||cq.indent(dr,"")==cq.indent(de,""))){dp=true}}}if(dp){return true}++dl});if(di){return}if(dm){aJ.push({from:dh,to:dl+1})}}if(dn&&cd.onHighlightComplete){cd.onHighlightComplete(co)}}function bU(de){if(!cw.length){return}aE.set(de,az(b5))}function aV(){cF=ci=c3=null;aJ=[];aX=false;cP=[]}function aG(){if(cT){bK()}if(bA&&!cd.lineWrapping){var de=bf.offsetWidth,dk=cg(bS,bS.text.length).left;if(!I){bf.style.left=dk+"px";bG.style.minWidth=(dk+de)+"px"}bA=false}var di,df;if(aX){var dj=b3();di=a7(dj.x,dj.y,dj.x,dj.yBot)}if(aJ.length||di&&di.scrollTop!=null){df=cs(aJ,true,di&&di.scrollTop)}if(!df){if(aX){db()}if(a0){aS()}}if(di){cu()}if(aX){c2()}if(cy&&!bp&&(cF===true||(cF!==false&&aX))){cR(ci)}if(aX&&cd.matchBrackets){setTimeout(az(function(){if(ch){ch();ch=null}if(aj(dc.from,dc.to)){ct(false)}}),20)}var dl=aX,dg=cP;if(c3&&cd.onChange&&co){cd.onChange(co,c3)}if(dl&&cd.onCursorActivity){cd.onCursorActivity(co)}for(var dh=0;dh<dg.length;++dh){dg[dh](co)}if(df&&cd.onUpdate){cd.onUpdate(co)}}var cG=0;function az(de){return function(){if(!cG++){aV()}try{var df=de.apply(this,arguments)}finally{if(!--cG){aG()}}return df}}function b0(de){bi.startCompound();try{return de()}finally{bi.endCompound()}}for(var bW in ai){if(ai.propertyIsEnumerable(bW)&&!co.propertyIsEnumerable(bW)){co[bW]=ai[bW]}}return co}x.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,smartIndent:true,tabSize:4,keyMap:"default",extraKeys:null,electricChars:true,autoClearEmptyLines:false,onKeyEvent:null,onDragEvent:null,lineWrapping:false,lineNumbers:false,gutter:false,fixedGutter:false,firstLineNumber:1,readOnly:false,dragDrop:true,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(ar){return ar}};var w=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var S=w||/Mac/.test(navigator.platform);var Z=/Win/.test(navigator.platform);var ao=x.modes={},X=x.mimeModes={};x.defineMode=function(ar,au){if(!x.defaults.mode&&ar!="null"){x.defaults.mode=ar}if(arguments.length>2){au.dependencies=[];for(var at=2;at<arguments.length;++at){au.dependencies.push(arguments[at])}}ao[ar]=au};x.defineMIME=function(at,ar){X[at]=ar};x.resolveMode=function(ar){if(typeof ar=="string"&&X.hasOwnProperty(ar)){ar=X[ar]}else{if(typeof ar=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(ar)){return x.resolveMode("application/xml")}}if(typeof ar=="string"){return{name:ar}}else{return ar||{name:"null"}}};x.getMode=function(at,ar){var ar=x.resolveMode(ar);var au=ao[ar.name];if(!au){return x.getMode(at,"text/plain")}return au(at,ar)};x.listModes=function(){var at=[];for(var ar in ao){if(ao.propertyIsEnumerable(ar)){at.push(ar)}}return at};x.listMIMEs=function(){var at=[];for(var ar in X){if(X.propertyIsEnumerable(ar)){at.push({mime:ar,mode:X[ar]})}}return at};var ai=x.extensions={};x.defineExtension=function(ar,at){ai[ar]=at};var R=x.commands={selectAll:function(ar){ar.setSelection({line:0,ch:0},{line:ar.lineCount()-1})},killLine:function(ar){var av=ar.getCursor(true),au=ar.getCursor(false),at=!aj(av,au);if(!at&&ar.getLine(av.line).length==av.ch){ar.replaceRange("",av,{line:av.line+1,ch:0})}else{ar.replaceRange("",av,at?au:{line:av.line})}},deleteLine:function(ar){var at=ar.getCursor().line;ar.replaceRange("",{line:at,ch:0},{line:at})},undo:function(ar){ar.undo()},redo:function(ar){ar.redo()},goDocStart:function(ar){ar.setCursor(0,0,true)},goDocEnd:function(ar){ar.setSelection({line:ar.lineCount()-1},null,true)},goLineStart:function(ar){ar.setCursor(ar.getCursor().line,0,true)},goLineStartSmart:function(ar){var av=ar.getCursor();var au=ar.getLine(av.line),at=Math.max(0,au.search(/\S/));ar.setCursor(av.line,av.ch<=at&&av.ch?0:at,true)},goLineEnd:function(ar){ar.setSelection({line:ar.getCursor().line},null,true)},goLineUp:function(ar){ar.moveV(-1,"line")},goLineDown:function(ar){ar.moveV(1,"line")},goPageUp:function(ar){ar.moveV(-1,"page")},goPageDown:function(ar){ar.moveV(1,"page")},goCharLeft:function(ar){ar.moveH(-1,"char")},goCharRight:function(ar){ar.moveH(1,"char")},goColumnLeft:function(ar){ar.moveH(-1,"column")},goColumnRight:function(ar){ar.moveH(1,"column")},goWordLeft:function(ar){ar.moveH(-1,"word")},goWordRight:function(ar){ar.moveH(1,"word")},delCharLeft:function(ar){ar.deleteH(-1,"char")},delCharRight:function(ar){ar.deleteH(1,"char")},delWordLeft:function(ar){ar.deleteH(-1,"word")},delWordRight:function(ar){ar.deleteH(1,"word")},indentAuto:function(ar){ar.indentSelection("smart")},indentMore:function(ar){ar.indentSelection("add")},indentLess:function(ar){ar.indentSelection("subtract")},insertTab:function(ar){ar.replaceSelection("\t","end")},defaultTab:function(ar){if(ar.somethingSelected()){ar.indentSelection("add")}else{ar.replaceSelection("\t","end")}},transposeChars:function(ar){var au=ar.getCursor(),at=ar.getLine(au.line);if(au.ch>0&&au.ch<at.length-1){ar.replaceRange(at.charAt(au.ch)+at.charAt(au.ch-1),{line:au.line,ch:au.ch-1},{line:au.line,ch:au.ch+1})}},newlineAndIndent:function(ar){ar.replaceSelection("\n","end");ar.indentLine(ar.getCursor().line)},toggleOverwrite:function(ar){ar.toggleOverwrite()}};var B=x.keyMap={};B.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};B.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};B.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};B["default"]=S?B.macDefault:B.pcDefault;B.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function c(ar){if(typeof ar=="string"){return B[ar]}else{return ar}}function n(at,ar,ax,av,au){function aw(aC){aC=c(aC);var aA=aC[at];if(aA===false){if(au){au()}return true}if(aA!=null&&av(aA)){return true}if(aC.nofallthrough){if(au){au()}return true}var az=aC.fallthrough;if(az==null){return false}if(Object.prototype.toString.call(az)!="[object Array]"){return aw(az)}for(var ay=0,aB=az.length;ay<aB;++ay){if(aw(az[ay])){return true}}return false}if(ar&&aw(ar)){return true}return aw(ax)}function V(at){var ar=W[y(at,"keyCode")];return ar=="Ctrl"||ar=="Alt"||ar=="Shift"||ar=="Mod"}x.fromTextArea=function(ay,aA){if(!aA){aA={}}aA.value=ay.value;if(!aA.tabindex&&ay.tabindex){aA.tabindex=ay.tabindex}if(aA.autofocus==null){var ar=document.body;try{ar=document.activeElement}catch(au){}aA.autofocus=ar==ay||ay.getAttribute("autofocus")!=null&&ar==document.body}function aw(){ay.value=az.getValue()}if(ay.form){var at=v(ay.form,"submit",aw,true);if(typeof ay.form.submit=="function"){var ax=ay.form.submit;ay.form.submit=function av(){aw();ay.form.submit=ax;ay.form.submit();ay.form.submit=av}}}ay.style.display="none";var az=x(function(aB){ay.parentNode.insertBefore(aB,ay.nextSibling)},aA);az.save=aw;az.getTextArea=function(){return ay};az.toTextArea=function(){aw();ay.parentNode.removeChild(az.getWrapperElement());ay.style.display="";if(ay.form){at();if(typeof ay.form.submit=="function"){ay.form.submit=ax}}};return az};var U=/gecko\/\d{7}/i.test(navigator.userAgent);var O=/MSIE \d/.test(navigator.userAgent);var I=/MSIE [1-7]\b/.test(navigator.userAgent);var F=/MSIE [1-8]\b/.test(navigator.userAgent);var J=O&&document.documentMode==5;var h=/WebKit\//.test(navigator.userAgent);var al=/Chrome\//.test(navigator.userAgent);var Q=/Opera\//.test(navigator.userAgent);var i=/Apple Computer/.test(navigator.vendor);var p=/KHTML\//.test(navigator.userAgent);var g=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);function t(av,ar){if(ar===true){return ar}if(av.copyState){return av.copyState(ar)}var au={};for(var aw in ar){var at=ar[aw];if(at instanceof Array){at=at.concat([])}au[aw]=at}return au}x.copyState=t;function aa(au,at,ar){return au.startState?au.startState(at,ar):true}x.startState=aa;function b(ar,at){this.pos=this.start=0;this.string=ar;this.tabSize=at||8}b.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(ar){var au=this.string.charAt(this.pos);if(typeof ar=="string"){var at=au==ar}else{var at=au&&(ar.test?ar.test(au):ar(au))}if(at){++this.pos;return au}},eatWhile:function(ar){var at=this.pos;while(this.eat(ar)){}return this.pos>at},eatSpace:function(){var ar=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>ar},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ar){var at=this.string.indexOf(ar,this.pos);if(at>-1){this.pos=at;return true}},backUp:function(ar){this.pos-=ar},column:function(){return r(this.string,this.start,this.tabSize)},indentation:function(){return r(this.string,null,this.tabSize)},match:function(av,at,ar){if(typeof av=="string"){var aw=function(ax){return ar?ax.toLowerCase():ax};if(aw(this.string).indexOf(aw(av),this.pos)==this.pos){if(at!==false){this.pos+=av.length}return true}}else{var au=this.string.slice(this.pos).match(av);if(au&&at!==false){this.pos+=au[0].length}return au}},current:function(){return this.string.slice(this.start,this.pos)}};x.StringStream=b;function P(av,au,at,ar){this.from=av;this.to=au;this.style=at;this.marker=ar}P.prototype={attach:function(ar){this.marker.set.push(ar)},detach:function(at){var ar=u(this.marker.set,at);if(ar>-1){this.marker.set.splice(ar,1)}},split:function(av,ar){if(this.to<=av&&this.to!=null){return null}var au=this.from<av||this.from==null?null:this.from-av+ar;var at=this.to==null?null:this.to-av+ar;return new P(au,at,this.style,this.marker)},dup:function(){return new P(null,null,this.style,this.marker)},clipTo:function(at,aw,ar,av,au){if(at&&av>this.from&&(av<this.to||this.to==null)){this.from=null}else{if(this.from!=null&&this.from>=aw){this.from=Math.max(av,this.from)+au}}if(ar&&(aw<this.to||this.to==null)&&(aw>this.from||this.from==null)){this.to=null}else{if(this.to!=null&&this.to>aw){this.to=av<this.to?this.to+au:aw}}},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(ar){return this.marker==ar.marker}};function L(ar){this.from=ar;this.to=ar;this.line=null}L.prototype={attach:function(ar){this.line=ar},detach:function(ar){if(this.line==ar){this.line=null}},split:function(at,ar){if(at<this.from){this.from=this.to=(this.from-at)+ar;return this}},isDead:function(){return this.from>this.to},clipTo:function(at,aw,ar,av,au){if((at||aw<this.from)&&(ar||av>this.to)){this.from=0;this.to=-1}else{if(this.from>aw){this.from=this.to=Math.max(av,this.from)+au}}},sameSet:function(ar){return false},find:function(){if(!this.line||!this.line.parent){return null}return{line:ae(this.line),ch:this.from}},clear:function(){if(this.line){var ar=u(this.line.marked,this);if(ar!=-1){this.line.marked.splice(ar,1)}this.line=null}}};var o=" ";if(U||(O&&!I)){o="\u200b"}else{if(Q){o=""}}function e(at,ar){this.styles=ar||[at,null];this.text=at;this.height=1}e.inheritMarks=function(aw,az){var av=new e(aw),ar=az&&az.marked;if(ar){for(var au=0;au<ar.length;++au){if(ar[au].to==null&&ar[au].style){var at=av.marked||(av.marked=[]),ay=ar[au];var ax=ay.dup();at.push(ax);ax.attach(av)}}}return av};e.prototype={replace:function(aw,av,az){var aA=[],au=this.marked,ax=av==null?this.text.length:av;aq(0,aw,this.styles,aA);if(az){aA.push(az,null)}aq(ax,this.text.length,this.styles,aA);this.styles=aA;this.text=this.text.slice(0,aw)+az+this.text.slice(ax);this.stateAfter=null;if(au){var ay=az.length-(ax-aw);for(var at=0;at<au.length;++at){var ar=au[at];ar.clipTo(aw==null,aw||0,av==null,ax,ay);if(ar.isDead()){ar.detach(this);au.splice(at--,1)}}}},split:function(az,ax){var av=[ax,null],at=this.marked;aq(az,this.text.length,this.styles,av);var au=new e(ax+this.text.slice(az),av);if(at){for(var aw=0;aw<at.length;++aw){var ay=at[aw];var ar=ay.split(az,ax.length);if(ar){if(!au.marked){au.marked=[]}au.marked.push(ar);ar.attach(au);if(ar==ay){at.splice(aw--,1)}}}}return au},append:function(at){var ay=this.text.length,ar=at.marked,aw=this.marked;this.text+=at.text;aq(0,at.text.length,at.styles,this.styles);if(aw){for(var ax=0;ax<aw.length;++ax){if(aw[ax].to==null){aw[ax].to=ay}}}if(ar&&ar.length){if(!aw){this.marked=aw=[]}outer:for(var ax=0;ax<ar.length;++ax){var az=ar[ax];if(!az.from){for(var av=0;av<aw.length;++av){var au=aw[av];if(au.to==ay&&au.sameSet(az)){au.to=az.to==null?null:az.to+ay;if(au.isDead()){au.detach(this);ar.splice(ax--,1)}continue outer}}}aw.push(az);az.attach(this);az.from+=ay;if(az.to!=null){az.to+=ay}}}},fixMarkEnds:function(at){var ar=this.marked,ax=at.marked;if(!ar){return}outer:for(var aw=0;aw<ar.length;++aw){var az=ar[aw],ay=az.to==null;if(ay&&ax){for(var av=0;av<ax.length;++av){var au=ax[av];if(!au.sameSet(az)||au.from!=null){continue}if(az.from==this.text.length&&au.to==0){ax.splice(av,1);ar.splice(aw--,1);continue outer}else{ay=false;break}}}if(ay){az.to=this.text.length}}},fixMarkStarts:function(){var ar=this.marked;if(!ar){return}for(var at=0;at<ar.length;++at){if(ar[at].from==null){ar[at].from=0}}},addMark:function(ar){ar.attach(this);if(this.marked==null){this.marked=[]}this.marked.push(ar);this.marked.sort(function(au,at){return(au.from||0)-(at.from||0)})},highlight:function(ax,at,ay){var aB=new b(this.text,ay),aC=this.styles,az=0;var aw=false,au=aC[0],aA;if(this.text==""&&ax.blankLine){ax.blankLine(at)}while(!aB.eol()){var ar=ax.token(aB,at);var av=this.text.slice(aB.start,aB.pos);aB.start=aB.pos;if(az&&aC[az-1]==ar){aC[az-2]+=av}else{if(av){if(!aw&&(aC[az+1]!=ar||(az&&aC[az-2]!=aA))){aw=true}aC[az++]=av;aC[az++]=ar;aA=au;au=aC[az]}}if(aB.pos>5000){aC[az++]=this.text.slice(aB.pos);aC[az++]=null;break}}if(aC.length!=az){aC.length=az;aw=true}if(az&&aC[az-2]!=aA){aw=true}return aw||(aC.length<5&&this.text.length<10?null:false)},getTokenAt:function(ay,av,aw,au){var ar=this.text,ax=new b(ar,aw);while(ax.pos<au&&!ax.eol()){ax.start=ax.pos;var at=ay.token(ax,av)}return{start:ax.start,end:ax.pos,string:ax.current(),className:at||null,state:av}},indentation:function(ar){return r(this.text,null,ar)},getElement:function(aR,ar,av){var az=true,ax=0,aM=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;var aF=ad("pre");function aN(a3,a7,aZ){if(!a7){return}if(az&&O&&a7.charAt(0)==" "){a7="\u00a0"+a7.slice(1)}az=false;if(!aM.test(a7)){ax+=a7.length;var a4=document.createTextNode(a7)}else{var a4=document.createDocumentFragment(),a6=0;while(true){aM.lastIndex=a6;var a1=aM.exec(a7);var a5=a1?a1.index-a6:a7.length-a6;if(a5){a4.appendChild(document.createTextNode(a7.slice(a6,a6+a5)));ax+=a5}if(!a1){break}a6+=a5+1;if(a1[0]=="\t"){var a0=aR(ax);a4.appendChild(a0.element.cloneNode(true));ax+=a0.width}else{var a2=ad("span","\u2022","cm-invalidchar");a2.title="\\u"+a1[0].charCodeAt(0).toString(16);a4.appendChild(a2);ax+=1}}}if(aZ){a3.appendChild(ad("span",[a4],aZ))}else{a3.appendChild(a4)}}var aQ=aN;if(ar!=null){var aK=0,aA=aF.anchor=ad("span");aQ=function(a0,a3,a1){var aZ=a3.length;if(ar>=aK&&ar<aK+aZ){if(ar>aK){aN(a0,a3.slice(0,ar-aK),a1);if(av){a0.appendChild(ad("wbr"))}}a0.appendChild(aA);var a2=ar-aK;aN(aA,Q?a3.slice(a2,a2+1):a3.slice(a2),a1);if(Q){aN(a0,a3.slice(a2+1),a1)}ar--;aK+=aZ}else{aK+=aZ;aN(a0,a3,a1);if(aK==ar&&aK==aV){l(aA,o);a0.appendChild(aA)}else{if(aK>ar+10&&/\s/.test(a3)){aQ=function(){}}}}}}var aJ=this.styles,aB=this.text,aG=this.marked;var aV=aB.length;function aw(aZ){if(!aZ){return null}return"cm-"+aZ.replace(/ +/g," cm-")}if(!aB&&ar==null){aQ(aF," ")}else{if(!aG||!aG.length){for(var aS=0,aC=0;aC<aV;aS+=2){var aI=aJ[aS],aU=aJ[aS+1],aL=aI.length;if(aC+aL>aV){aI=aI.slice(0,aV-aC)}aC+=aL;aQ(aF,aI,aw(aU))}}else{var ay=0,aS=0,aE="",aU,aY=0;var aX=aG[0].from||0,aP=[],aW=0;var aT=function(){var aZ;while(aW<aG.length&&((aZ=aG[aW]).from==ay||aZ.from==null)){if(aZ.style!=null){aP.push(aZ)}++aW}aX=aW<aG.length?aG[aW].from:Infinity;for(var a0=0;a0<aP.length;++a0){var a1=aP[a0].to;if(a1==null){a1=Infinity}if(a1==ay){aP.splice(a0--,1)}else{aX=Math.min(a1,aX)}}};var aH=0;while(ay<aV){if(aX==ay){aT()}var aD=Math.min(aV,aX);while(true){if(aE){var au=ay+aE.length;var at=aU;for(var aO=0;aO<aP.length;++aO){at=(at?at+" ":"")+aP[aO].style}aQ(aF,au>aD?aE.slice(0,aD-ay):aE,at);if(au>=aD){aE=aE.slice(aD-ay);ay=aD;break}ay=au}aE=aJ[aS++];aU=aw(aJ[aS++])}}}}return aF},cleanUp:function(){this.parent=null;if(this.marked){for(var ar=0,at=this.marked.length;ar<at;++ar){this.marked[ar].detach(this)}}}};function aq(ay,az,ar,aA){for(var aw=0,ax=0,at=0;ax<az;aw+=2){var au=ar[aw],av=ax+au.length;if(at==0){if(av>ay){aA.push(au.slice(ay-ax,Math.min(au.length,az-ax)),ar[aw+1])}if(av>=ay){at=1}}else{if(at==1){if(av>az){aA.push(au.slice(0,az-ax),ar[aw+1])}else{aA.push(au,ar[aw+1])}}}ax=av}}function an(at){this.lines=at;this.parent=null;for(var au=0,av=at.length,ar=0;au<av;++au){at[au].parent=this;ar+=at[au].height}this.height=ar}an.prototype={chunkSize:function(){return this.lines.length},remove:function(ar,az,ax){for(var aw=ar,ay=ar+az;aw<ay;++aw){var au=this.lines[aw];this.height-=au.height;au.cleanUp();if(au.handlers){for(var av=0;av<au.handlers.length;++av){ax.push(au.handlers[av])}}}this.lines.splice(ar,az)},collapse:function(ar){ar.splice.apply(ar,[ar.length,0].concat(this.lines))},insertHeight:function(au,av,ar){this.height+=ar;this.lines=this.lines.slice(0,au).concat(av).concat(this.lines.slice(au));for(var aw=0,ax=av.length;aw<ax;++aw){av[aw].parent=this}},iterN:function(ar,aw,av){for(var au=ar+aw;ar<au;++ar){if(av(this.lines[ar])){return true}}}};function k(av){this.children=av;var au=0,ar=0;for(var at=0,ax=av.length;at<ax;++at){var aw=av[at];au+=aw.chunkSize();ar+=aw.height;aw.parent=this}this.size=au;this.height=ar;this.parent=null}k.prototype={chunkSize:function(){return this.size},remove:function(av,au,ay){this.size-=au;for(var aw=0;aw<this.children.length;++aw){var ar=this.children[aw],az=ar.chunkSize();if(av<az){var ax=Math.min(au,az-av),aA=ar.height;ar.remove(av,ax,ay);this.height-=aA-ar.height;if(az==ax){this.children.splice(aw--,1);ar.parent=null}if((au-=ax)==0){break}av=0}else{av-=az}}if(this.size-au<25){var aB=[];this.collapse(aB);this.children=[new an(aB)];this.children[0].parent=this}},collapse:function(ar){for(var at=0,au=this.children.length;at<au;++at){this.children[at].collapse(ar)}},insert:function(au,av){var ar=0;for(var aw=0,ax=av.length;aw<ax;++aw){ar+=av[aw].height}this.insertHeight(au,av,ar)},insertHeight:function(au,aB,aA){this.size+=aB.length;this.height+=aA;for(var av=0,ax=this.children.length;av<ax;++av){var ar=this.children[av],ay=ar.chunkSize();if(au<=ay){ar.insertHeight(au,aB,aA);if(ar.lines&&ar.lines.length>50){while(ar.lines.length>50){var aw=ar.lines.splice(ar.lines.length-25,25);var az=new an(aw);ar.height-=az.height;this.children.splice(av+1,0,az);az.parent=this}this.maybeSpill()}break}au-=ay}},maybeSpill:function(){if(this.children.length<=10){return}var av=this;do{var at=av.children.splice(av.children.length-5,5);var au=new k(at);if(!av.parent){var aw=new k(av.children);aw.parent=av;av.children=[aw,au];av=aw}else{av.size-=au.size;av.height-=au.height;var ar=u(av.parent.children,av);av.parent.children.splice(ar+1,0,au)}au.parent=av.parent}while(av.children.length>10);av.parent.maybeSpill()},iter:function(au,at,ar){this.iterN(au,at-au,ar)},iterN:function(ar,aA,az){for(var au=0,ax=this.children.length;au<ax;++au){var ay=this.children[au],aw=ay.chunkSize();if(ar<aw){var av=Math.min(aA,aw-ar);if(ay.iterN(ar,av,az)){return true}if((aA-=av)==0){break}ar=0}else{ar-=aw}}}};function H(ar,aw){while(!ar.lines){for(var at=0;;++at){var av=ar.children[at],au=av.chunkSize();if(aw<au){ar=av;break}aw-=au}}return ar.lines[aw]}function ae(ar){if(ar.parent==null){return null}var ax=ar.parent,aw=u(ax.lines,ar);for(var at=ax.parent;at;ax=at,at=at.parent){for(var au=0,av=at.children.length;;++au){if(at.children[au]==ax){break}aw+=at.children[au].chunkSize()}}return aw}function ac(ay,aw){var au=0;outer:do{for(var av=0,ax=ay.children.length;av<ax;++av){var at=ay.children[av],ar=at.height;if(aw<ar){ay=at;continue outer}aw-=ar;au+=at.chunkSize()}return au}while(!ay.lines);for(var av=0,ax=ay.lines.length;av<ax;++av){var aA=ay.lines[av],az=aA.height;if(aw<az){break}aw-=az}return au+av}function f(ar,ay){var au=0;outer:do{for(var at=0,aw=ar.children.length;at<aw;++at){var ax=ar.children[at],av=ax.chunkSize();if(ay<av){ar=ax;continue outer}ay-=av;au+=ax.height}return au}while(!ar.lines);for(var at=0;at<ay;++at){au+=ar.lines[at].height}return au}function m(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=false}m.prototype={addChange:function(ar,ax,at){this.undone.length=0;var au=+new Date,az=this.done[this.done.length-1],aA=az&&az[az.length-1];var aw=au-this.time;if(this.compound&&az&&!this.closed){az.push({start:ar,added:ax,old:at})}else{if(aw>400||!aA||this.closed||aA.start>ar+at.length||aA.start+aA.added<ar){this.done.push([{start:ar,added:ax,old:at}]);this.closed=false}else{var ay=Math.max(0,aA.start-ar),aB=Math.max(0,(ar+at.length)-(aA.start+aA.added));for(var av=ay;av>0;--av){aA.old.unshift(at[av-1])}for(var av=aB;av>0;--av){aA.old.push(at[at.length-av])}if(ay){aA.start=ar}aA.added+=ax-(at.length-ay-aB)}}this.time=au},startCompound:function(){if(!this.compound++){this.closed=true}},endCompound:function(){if(!--this.compound){this.closed=true}}};function N(){A(this)}function T(ar){if(!ar.stop){ar.stop=N}return ar}function Y(ar){if(ar.preventDefault){ar.preventDefault()}else{ar.returnValue=false}}function G(ar){if(ar.stopPropagation){ar.stopPropagation()}else{ar.cancelBubble=true}}function A(ar){Y(ar);G(ar)}x.e_stop=A;x.e_preventDefault=Y;x.e_stopPropagation=G;function j(ar){return ar.target||ar.srcElement}function z(at){var ar=at.which;if(ar==null){if(at.button&1){ar=1}else{if(at.button&2){ar=3}else{if(at.button&4){ar=2}}}}if(S&&at.ctrlKey&&ar==1){ar=3}return ar}function y(at,au){var ar=at.override&&at.override.hasOwnProperty(au);return ar?at.override[au]:at[au]}function v(av,au,at,ar){if(typeof av.addEventListener=="function"){av.addEventListener(au,at,false);if(ar){return function(){av.removeEventListener(au,at,false)}}}else{var aw=function(ax){at(ax||window.event)};av.attachEvent("on"+au,aw);if(ar){return function(){av.detachEvent("on"+au,aw)}}}}x.connect=v;function C(){this.id=null}C.prototype={set:function(ar,at){clearTimeout(this.id);this.id=setTimeout(at,ar)}};var ah=x.Pass={toString:function(){return"CodeMirror.Pass"}};var K=function(){if(F){return false}var ar=ad("div");return"draggable" in ar||"dragDrop" in ar}();var d=function(){var ar=ad("textarea");ar.value="foo\nbar";if(ar.value.indexOf("\r")>-1){return"\r\n"}return"\n"}();var s=/^$/;if(U){s=/$'/}else{if(i){s=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/}else{if(al){s=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/}}}function r(at,ar,av){if(ar==null){ar=at.search(/[^\s\u00a0]/);if(ar==-1){ar=at.length}}for(var au=0,aw=0;au<ar;++au){if(at.charAt(au)=="\t"){aw+=av-(aw%av)}else{++aw}}return aw}function ap(av,ar){try{var au=av.getBoundingClientRect();au={top:au.top,left:au.left}}catch(aw){au={top:0,left:0}}if(!ar){if(window.pageYOffset==null){var at=document.documentElement||document.body.parentNode;if(at.scrollTop==null){at=document.body}au.top+=at.scrollTop;au.left+=at.scrollLeft}else{au.top+=window.pageYOffset;au.left+=window.pageXOffset}}return au}function M(ar){return ar.textContent||ar.innerText||ar.nodeValue||""}function a(ar){if(w){ar.selectionStart=0;ar.selectionEnd=ar.value.length}else{ar.select()}}function aj(at,ar){return at.line==ar.line&&at.ch==ar.ch}function af(at,ar){return at.line<ar.line||(at.line==ar.line&&at.ch<ar.ch)}function ag(ar){return{line:ar.line,ch:ar.ch}}function ad(ar,aw,av,au){var ax=document.createElement(ar);if(av){ax.className=av}if(au){ax.style.cssText=au}if(typeof aw=="string"){l(ax,aw)}else{if(aw){for(var at=0;at<aw.length;++at){ax.appendChild(aw[at])}}}return ax}function E(ar){ar.innerHTML="";return ar}function q(ar,at){E(ar).appendChild(at)}function l(ar,at){if(F){ar.innerHTML="";ar.appendChild(document.createTextNode(at))}else{ar.textContent=at}}x.setTextContent=l;function ab(av,au){if(!au){return 0}if(!av){return au.length}for(var at=av.length,ar=au.length;at>=0&&ar>=0;--at,--ar){if(av.charAt(at)!=au.charAt(ar)){break}}return ar+1}function u(av,ar){if(av.indexOf){return av.indexOf(ar)}for(var at=0,au=av.length;at<au;++at){if(av[at]==ar){return at}}return -1}function am(ar){return/\w/.test(ar)||ar.toUpperCase()!=ar.toLowerCase()}var D="\n\nb".split(/\n/).length!=3?function(ax){var ay=0,ar=[],aw=ax.length;while(ay<=aw){var av=ax.indexOf("\n",ay);if(av==-1){av=ax.length}var au=ax.slice(ay,ax.charAt(av-1)=="\r"?av-1:av);var at=au.indexOf("\r");if(at!=-1){ar.push(au.slice(0,at));ay+=at+1}else{ar.push(au);ay=av+1}}return ar}:function(ar){return ar.split(/\r\n?|\n/)};x.splitLines=D;var ak=window.getSelection?function(at){try{return at.selectionStart!=at.selectionEnd}catch(ar){return false}}:function(au){try{var ar=au.ownerDocument.selection.createRange()}catch(at){}if(!ar||ar.parentElement()!=au){return false}return ar.compareEndPoints("StartToEnd",ar)!=0};x.defineMode("null",function(){return{token:function(ar){ar.skipToEnd()}}});x.defineMIME("text/plain","null");var W={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};x.keyNames=W;(function(){for(var ar=0;ar<10;ar++){W[ar+48]=String(ar)}for(var ar=65;ar<=90;ar++){W[ar]=String.fromCharCode(ar)}for(var ar=1;ar<=12;ar++){W[ar+111]=W[ar+63235]="F"+ar}})();return x})();